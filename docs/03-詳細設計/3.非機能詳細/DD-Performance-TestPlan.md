# 性能/負荷試験計画（詳細）

## 対応NFR
- NFR-PS-001〜006（中心）
- NFR-PS-007, PS-008, PS-009, PS-010

## 試験ツール/環境
- ツール: k6（CI連携）
- データセット: 100,000ノート/10,000ユーザー
- 試験環境: 本番相当（スケール/設定一致）

## 試験シナリオ
- 主要API（CRUD/検索/共有/エクスポート）
- 主要画面操作（RUM/合成）
- 目標負荷
  - ランプアップ: 10分で200rps
  - 継続: 30分 200rps維持
  - スパイク: 5分 400rps
- 目標指標
  - API p95 300ms / p99 800ms
  - 体感 p95 2.0s / p99 4.0s
  - エラー率 <= 0.5%
  - スケールアウト 5分以内で安定
  - DB主要クエリ p95 100ms
  - Ready 60秒以内（NFR-PS-008）
  - ペイロード 1MB以下（NFR-PS-010）

## 合否基準
- SLO/SLIに基づく
- 429発生率 <= 0.2%
- タイムアウト 0.1%未満
- リソース
  - CPU平均 < 70%
  - メモリ平均 < 75%

## 結果保存
- リリースごとにレポート保管（PRC-008）
- メトリクス/ログ/設定値を同梱
