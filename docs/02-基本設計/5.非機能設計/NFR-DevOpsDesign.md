# DevOps設計（NFR-DEV）

## 対応NFR
- NFR-DEV-001 IaC
- NFR-DEV-002 CI/CDと品質ゲート
- NFR-DEV-003 段階的リリース（Should）
- NFR-DEV-004 迅速ロールバック（30分以内、四半期訓練）
- NFR-DEV-005 後方互換とバージョニング
- NFR-DEV-006 自動テスト網羅（主要ユースケース）
- NFR-DEV-007 環境分離（Dev/Stg/Prod）と昇格
- NFR-DEV-008 変更管理とリリースノート（Should）
- NFR-DEV-009 ADR（Could）

## IaC（DEV-001）
- すべてのクラウドリソース/設定をIaCで管理し、再現可能に構築できること
- 手作業変更は検知し、是正（SEC-009と整合）

## CI/CDと品質ゲート（DEV-002）
- 静的解析、依存関係スキャン、自動テストを必須ゲート化
- セキュリティ（SEC-007/012）とアクセシビリティ（UX-023）の検査をパイプラインに統合

## 段階的リリース（DEV-003）
- カナリア/ブルーグリーンを標準
- カナリア中のSLI悪化（OPS-002）で停止/切戻し可能

## ロールバック（DEV-004）
- 30分以内に直前安定版へロールバックできる手順を整備
- 四半期に1回訓練し、記録を保存（PRC-008のエビデンス）

## 互換性/バージョニング（DEV-005）
- 外部公開APIとスキーマの互換性方針を文書化
- 破壊的変更は事前通知、リリースノートに必ず記録

## 自動テスト（DEV-006）
- 主要ユースケース（UC）にE2Eテストを紐づけ
- CIで成功しない限りマージ不可

## 環境分離/昇格（DEV-007）
- Dev/Stg/Prodを分離
- 同一ビルド成果物を段階昇格（設定差異事故を低減）

## 変更管理/リリースノート（DEV-008）
- 本番変更は「内容/実施者/日時/ロールバック」を記録
- 利用者向けにリリースノートを提供

## ADR（DEV-009）
- 重要な設計決定はADRとして代替案・理由・影響を残す
