# コスト設計（NFR-COST）

## 対応NFR
- NFR-COST-001 コスト配賦（タグ/ラベル、90%以上）
- NFR-COST-002 予算設定と通知（80%/100%）
- NFR-COST-003 非本番の稼働抑制（スケジュール停止）
- NFR-COST-004 コスト異常検知（24時間以内通知）
- NFR-COST-005 ストレージライフサイクル（階層化/削除）

## タグ標準（COST-001）
- 必須タグ（例）：service / env / team / owner / costCenter
- 配賦率90%以上を月次で確認し、未付与リソースを是正

## 予算/通知（COST-002）
- 月次予算を設定し、80%/100%到達で通知
- オートスケール（PS-004）による変動を考慮し、閾値と緊急時運用を定義

## 最小構成の方針
- 個人開発ではWAFや冗長構成を省略し、従量課金の小さい構成を優先
- Aurora Serverless v2はauto pauseを有効化し、アイドル時は0 ACUを許容
- VPC/NAT/ALBの固定費を避け、サーバレス中心で構成

## 非本番停止（COST-003）
- Dev/Stgはスケジュール停止または縮退を標準（例外は記録）
- 開発利便性とのトレードオフを方針化

## 異常検知（COST-004）
- 日次コストのトレンド逸脱を検知し、24時間以内に通知
- 配賦タグ（COST-001）が検知精度に直結するため運用で担保

## ストレージライフサイクル（COST-005）
- ログ/バックアップ/非活性データは階層化/アーカイブを自動適用
- 監査ログ保持（PRC-004）・バックアップ保持（AV-005）と整合させる
